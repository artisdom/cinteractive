<!DOCTYPE html>
<html lang="en">
   <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>C Interactive Interpreter</title>
      <link href="static/css/smoothness/jquery-ui-1.10.2.custom.css" rel="stylesheet">
      <script type="text/javascript" src="static/js/jquery-1.9.1.js"></script>
      <script src="static/js/jquery-ui-1.10.2.custom.js"></script>
      <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/1.2.0/lodash.js"></script>
      <script type="text/javascript" src="static/js/interp/prettyprint.js"></script>
      <script type="text/javascript" src="static/js/interp/interpreter.js"></script>
      <script type="text/javascript" src="static/js/interp/stepper.js"></script>
      <script type="text/javascript" src="static/js/codemirror.js"></script>
      <!--<link href="static/css/bootstrap.css" rel="stylesheet">-->
      <link rel="stylesheet" href="static/css/style.css">
      <link rel="stylesheet" href="static/css/codemirror.css">
      <script src="static/js/clike/clike.js"></script>
      <script src="static/js/interp/driver.js"></script>
      <!-- TODO: really should learn a module system or something for the javascript -->
      <script>
         $(document).ready(function() {
            var myCodeMirror = CodeMirror.fromTextArea(document.getElementById("code"));
            $('#step').click(uiStep);
            $('#collectsteps').click(collectSteps);
            $('#code').focus();
            $("#compile").click(function() {
               $('#functions').empty();
               $('#source').empty();
               $.post('http://localhost:3000/parse', $('#code').val())
               .success(receiveAST)
               .error(function(err) { $('#functions').html(err)});
               return false;
            });
         });
      </script>
   </head>
   <body>
      <div class="container">
         <button id="compile">Compile</button>
         <div id="topbar">
            <ul id="toplinks">
               <li><a href="#" id="compile">Compile</a></li>
            </ul>
         </div>
         <div class="codecontainer">
            <div class="line-nums">

            </div>
<textarea id="code">
unsigned int global_var, global_twar = 3;

int dup(int n) {
   n = n + n;
   return n;
}

int main() {
   int num;
   num = 5;
   if (1) {
      num = dup(num);
   } else {
      num = 3;
      num += 1;
   }


   return 0;
}</textarea>
         </div>
         <div id="controls">
            <div id="steps">
               <div id="steps_collected"></div>
               <a href="#" id="step">Step</a>
               <a href="#" id="collectsteps">Collect Steps</a>
               <div id="whatsgoingon"></div>
               <br>
               <input type="range" name="step" id="stepper" min="1" max="10" value="0">
            </div>
            <ul id="functions">
            </ul>
         </div>

         <br style="clear: both;">
      </div>
      <table id="stack">
         <tr>
            <th>Variable Name</th>
            <th>Memory Location</th>
         </tr>
      </table>
      <div id="memory-container">
         <h2>Memory</h2>
         <ul id="memory">
         </ul>
      </div>
      <br>
      <div id="source">
      </div>
      <!--
      <script type="text/javascript" src="static/js/behave.js"></script>
      <script type="text/javascript">
         var lineNumberFunc = function(data) {
            var numLines = data.lines.total,
               house = $('.line-nums'),
               html = '',
               i;

            for (i = 0; i < numLines; i++) {
               html += '<div>' + (i + 1) + '</div>';
            }

            house.html(html);
         };
         BehaveHooks.add(['init-after', 'keydown'], lineNumberFunc);

         var editor = new Behave({
            textarea: document.getElementById('code'),
            replaceTab: true,
            softTabs: true,
            tabSize: 3,
            autoStrip: true,
            overwrite: true,
            autoOpen: true,
            autoIndent: true
         });
      </script> -->
   </body>
</html>
