<!DOCTYPE html>
<html lang="en">
   <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>Alternate C Interactive Interface</title>
      <script type="text/javascript" src="static/js/jquery-1.9.1.js"></script>
      <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/1.2.0/lodash.js"></script>
      <script type="text/javascript" src="static/js/interp/prettyprint.js"></script>
      <script type="text/javascript" src="static/js/interp/interpreter.js"></script>
      <script type="text/javascript" src="static/js/interp/stepper.js"></script>
      <script type="text/javascript" src="static/js/codemirror.js"></script>
      <link rel="stylesheet" href="static/css/style.css">
      <link rel="stylesheet" href="static/css/codemirror.css">
      <link rel="stylesheet" href="static/css/theme/neat.css">
      <link href="static/css/bootstrap.css" rel="stylesheet">
      <script src="static/js/clike/clike.js"></script>
      <script src="static/js/interp/driver.js"></script>
      <script src="static/js/addon/edit/closebrackets.js"></script>
      <script>
         var CM
         $(document).ready(function() {
            CM = CodeMirror.fromTextArea(document.getElementById("code"), {
               indentUnit: 3,
               smartIndent: true,
               tabSize: 3,
               lineWrapping: true,
               lineNumbers: true,
               theme: 'neat',
               autoCloseBrackets: true
            });
            var controls = $('<div></div>');
            controls.attr('id', 'controls');
            $('.CodeMirror').append(controls);
            $('#step').click(uiStep);
            $('.opts_menu').toggle();
            $('#options').click(function() {$('.opts_menu').animate({height: 'toggle'});});
            $('#collectsteps').click(collectSteps);
            $('#code').focus();
            $("#compile").click(function() {
               $('#functions').empty();
               $('#source').empty();
               $.post('http://localhost:3000/parse', $('#code').val())
               .success(receiveAST)
               .error(function(err) { $('#functions').html(err)});
               return false;
            });
         });
      </script>
      <style>
         .CodeMirror {
            border: 1px solid #ddd;
            height: auto;
         }
      </style>
   </head>
   <body>
      <div class="navbar navbar-inverse">
         <div class="navbar-inner">
            <a class="brand" href="#">C Interactive Interpreter</a>
            <ul class="nav">
               <li class="active"><a href="#" id="compile">Compile!</a></li>
               <li><a href="#" onclick="CM.addLineClass(0, 'wrap', 'active_line');">ADD</a>
            </ul>
            <ul class="nav pull-right">
               <li class="active"><a href="#" id="options">Options</a></li>
            </ul>
         </div>
      </div>
      <div class="opts_menu row">
         <div class="span4">
            <label for="autoclosebrackets">Auto Close Brackets
               <input type="checkbox" name="autoclosebrackets">
            </label>
         </div>
      </div>
      <textarea id="code">
unsigned int global_var, global_twar = 3;

int dup(int n) {
   n = n + n;
   return n;
}

int main() {
   int num;
   num = 5;
   if (1) {
      num = dup(num);
   } else {
      num = 3;
      num += 1;
   }


   return 0;
}</textarea>
   </body>
</html>
