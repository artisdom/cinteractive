<!DOCTYPE html>
<html lang="en">
   <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>Alternate C Interactive Interface</title>
      <script type="text/javascript" src="static/js/jquery-1.9.1.js"></script>
      <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/1.2.0/lodash.js"></script>
      <script type="text/javascript" src="static/js/interp/prettyprint.js"></script>
      <script type="text/javascript" src="static/js/interp/interpreter.js"></script>
      <script type="text/javascript" src="static/js/interp/stepper.js"></script>
      <script type="text/javascript" src="static/js/codemirror.js"></script>
      <link rel="stylesheet" href="static/css/style.css">
      <link rel="stylesheet" href="static/css/codemirror.css">
      <link rel="stylesheet" href="static/css/theme/neat.css">
      <link href="static/css/bootstrap.css" rel="stylesheet">
      <script src="static/js/clike/clike.js"></script>
      <script src="static/js/interp/driver.js"></script>
      <script src="static/js/addon/edit/closebrackets.js"></script>
      <script>
         $(document).ready(function() {
            CM = CodeMirror.fromTextArea(document.getElementById("code"), {
               indentUnit: 3,
               smartIndent: true,
               tabSize: 3,
               lineWrapping: true,
               lineNumbers: true,
               theme: 'neat',
               autoCloseBrackets: true
            });
            CM.addKeyMap({
               'Shift-Ctrl-f': function(cm) {
                  nextStep();
               }
            });
            $('#step').click(uiStep);
            $('#autoclose').change(function(e){ CM.setOption('autoCloseBrackets', $(e.currentTarget).prop('checked')) });
            $('.opts_menu').toggle();
            $('#options').click(function() {$('.opts_menu').animate({height: 'toggle'});});
            $('#code').focus();
            $("#compile").click(function() {
               $('#functions').empty();
               $('#source').empty();
               $.post('http://localhost:3000/parse', CM.getValue())
               .success(receiveAST)
               .error(function(err) { $('#functions').html(err)});
               return false;
            });
         });
      </script>
      <style>
         .CodeMirror {
            border: 1px solid #ddd;
            height: auto;
         }
      </style>
   </head>
   <body>
      <div class="navbar navbar-inverse">
         <div class="navbar-inner">
            <a class="brand" href="#">C Interactive Interpreter</a>
            <ul class="nav">
               <li class="active"><a href="#" id="compile">Compile!</a></li>
               <li><a href="#" onclick="CM.addLineClass(0, 'wrap', 'active_line');">ADD</a>
            </ul>
            <ul class="nav pull-right">
               <li class="active"><a href="#" id="options">Options</a></li>
            </ul>
         </div>
      </div>
      <div class="opts_menu row">
         <div class="span4">
            <label for="autoclosebrackets">Auto Close Brackets
               <input type="checkbox" checked="checked" id="autoclose" name="autoclosebrackets">
            </label>
         </div>
      </div>
      <div class="alert alert-error" style="display:none;"></div>
      <textarea id="code">
unsigned int global_var, global_twar = 3;

int dup(int n) {
   n = n + n;
   return n;
}

int main() {
   int num;
   num = 0;
   int i;

   for (i = 0; i < 5; i++)
      num = dup(num);

   return 0;
}</textarea>
      <div style="padding:1em">
         <input type="range" name="step" id="stepper" min="1" max="1" value="1">
         <div id="whatsgoingon"></div>
      </div>
      <div id="ast">

      </div>
      <div id="controls_wrapper">
         <a href="#" onclick="uiStep();">Step</a>
         <div id="controls">
         </div>
      </div>
   </body>
</html>
